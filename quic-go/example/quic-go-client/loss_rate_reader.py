import os

original_length = [784156, 783420, 780214, 778481, 776441, 774907, 775963, 775477, 775712, 778034, 778568, 780000,
                   780940, 782784, 784488, 785207, 782734, 781627, 780020, 780316, 779080, 778294, 778921, 779303,
                   779753, 779378, 780039, 780387, 781665, 781389, 784406, 782685, 777013, 778664, 778021, 776497,
                   781301, 780343, 780799, 785444, 789493, 789362, 792728, 790879, 787990, 789731, 784964, 781144,
                   780482, 783390, 787251, 787748, 787073, 786065, 796227, 790205, 798822, 797938, 794491, 789067,
                   783888, 782799, 782805, 782141, 785521, 789031, 789655, 784732, 778173, 776341, 786897, 787160,
                   781061, 782473, 781593, 784195, 782875, 779465, 784733, 780715, 785768, 783322, 782751, 781888,
                   780559, 778357, 778472, 778606, 779966, 779688, 781097, 780551, 773060, 770836, 778873, 778347,
                   782812, 781432, 777396, 778281, 780713, 780342, 782365, 782178, 783035, 786843, 789379, 790821,
                   789348, 783767, 781254, 781261, 783537, 783060, 785726, 788423, 785303, 784328, 784844, 784756,
                   787200, 792175, 788304, 789236, 787187, 776293, 773926, 773316, 777015, 783188, 786122, 785636,
                   787279, 787748, 786780, 787636, 784523, 782976, 785455, 786871, 786223, 785909, 783123, 784008,
                   785973, 789044, 794608, 798012, 798653, 796707, 794731, 792875, 792803, 792323, 791939, 793809,
                   793474, 795541, 798790, 799376, 789791, 790944, 793748, 792897, 791313, 789499, 789991, 791612,
                   795048, 794877, 794899, 788919, 787390, 791935, 785058, 785773, 782977, 783680, 786728, 787597,
                   793733, 792343, 801478, 796962, 802612, 797053, 797525, 794893, 793604, 788952, 784860, 788018,
                   795978, 799221, 799416, 800497, 798350, 798468, 800784, 802392, 805299, 803332, 802050, 810242,
                   808199, 815237, 799440, 790334, 795959, 792905, 797334, 805228, 797140, 803150, 809311, 808170,
                   810369, 810225, 808659, 810797, 807102, 809383, 795368, 795469, 795734, 798737, 807455, 803330,
                   809088, 808279, 818862, 820631, 814160, 814866, 815739, 816092, 810882, 801921, 799210, 799635,
                   808188, 810623, 809100, 804119, 810257, 808465, 818609, 813430, 816265, 820598, 817549, 812721,
                   811031, 812430, 815888, 811827, 809337, 806080, 804008, 804689, 803037, 804914, 801046, 793652,
                   801170, 804763, 805463, 805343, 805433, 804488, 796115, 805087, 797218, 805153, 808087, 813598,
                   812320, 817514, 824817, 813958, 815321, 816343, 813263, 809347, 815496, 814647, 814955, 818861,
                   824066, 835472, 819619, 827813, 830785, 835018, 814981, 818670, 819821, 814780, 809273, 812226]


root = "Fetched"
len_list = []
count = 0

with open("log_file.csv", "w") as log_file:
    log_file.write("loss_rate" + "\n")
    for fileindex in range(1000, 1300):
        filename = "loot_vox10_" + str(fileindex) + ".ply.back"
        frame_length = len(open(root + "/" + filename, 'r').readlines())
        loss = 1.0 - frame_length/original_length[count]
        if loss < 0:
            loss = 0
        log_file.write(str(loss) + "\n")
        len_list.append(loss)
        print("frame", count, "loss:", loss, "original length:", original_length[count], "current length:", frame_length)
        count += 1

print("In average:", sum(len_list)/len(len_list))
